function initCurrency(){formatCurrency(".price .new"),formatCurrency(".price .old")}function formatCurrency(t){$(t).length&&new AutoNumeric.multiple(t,autoNumericOptions)}function validateEmail(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}function validatePhone(t){return/^[0-9-+]+$/.test(t)}function changeProductView(){"grid"==localStorage.getItem("product_view_type")?($(".product-grid-view").show(),$(".product-list-view").hide(),$(".grid-view").addClass("active custom_btn"),$(".list-view").removeClass("active custom_btn")):($(".product-grid-view").hide(),$(".product-list-view").show(),$(".grid-view").removeClass("active custom_btn"),$(".list-view").addClass("active custom_btn"))}function animated(){$(".wb-slider .owl-item").each(function(){1==$(this).hasClass("active")?$(this).find(".animated").each(function(){var t=$(this).attr("data-animated");$(this).addClass(t)}):$(this).find(".animated").each(function(){var t=$(this).attr("data-animated");$(this).removeClass(t)})})}function slick_animated(){$(".wb-slider .item-slider").each(function(){1==$(this).hasClass("slick-active")?$(this).find(".animated").each(function(){var t=$(this).attr("data-animated");$(this).addClass(t)}):$(this).find(".animated").each(function(){var t=$(this).attr("data-animated");$(this).removeClass(t)})})}function initOwl(){$(".wb-owl").length>0&&($(".wb-owl").each(function(){var t=$(this).data();$(this).owlCarousel({stagePadding:t.stagepadding,center:t.center,loop:t.loop,autoplayHoverPause:!0,lazyLoad:!0,items:t.itemscustom,responsive:t.responsive,autoplay:t.autoplay,autoplayTimeout:t.autoplaytimeout,animateIn:t.animatein,animateOut:t.animateout,dots:t.pagination,dotsEach:t.dotseach,nav:t.navigation,smartSpeed:t.smartspeed,navText:t.navtext,onDragged:animated,onInitialized:fixOwl,onRefreshed:fixOwl})}),$(".owl-nav").on("click",function(){animated()}),$(".owl-dots").on("click",function(){animated()}),$(".wb-owl").trigger("refresh.owl.carousel"))}function fb_show(t){document.getElementById(t).style.display="block"}function fb_hide(t){document.getElementById(t).style.display="none"}function chat_fb_close(){fb_hide("b-c-facebook"),fb_show("chat_f_b_smal")}function chat_fb_show(){fb_show("b-c-facebook"),fb_show("f-chat-conent"),fb_hide("chat_f_b_smal")}function fb_start(){fb_show("chat_f_b_smal"),fb_hide("b-c-facebook")}function validatpopupemail(){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test($("#email-popup").val())?($("#subscribe-me").modal("hide"),$(".banner").before('<div class="alert alert-success"><i class="fa fa-check-circle"></i>Subscription Success<button type="button" class="close" data-dismiss="alert">&times;</button></div>'),!1):(alert("Please Enter Valid Email"),!1)}function slick_control(){$(".slick-slider").each(function(){$(this).find(".slick-prev").html($(".slick-active").prev().find(".wb-client-thumb a").html()),$(this).find(".slick-next").html($(".slick-active").next().find(".wb-client-thumb a").html())})}var autoNumericOptions={decimalPlaces:0,currencySymbol:" đ",currencySymbolPlacement:AutoNumeric.options.currencySymbolPlacement.suffix};$(document).ready(function(){$("body").hasClass("keep-loading")||$("#loading").fadeOut(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),initCurrency()}),function(t,e,i){var a,n=t.getElementsByTagName(e)[0];t.getElementById(i)||(a=t.createElement(e),a.id=i,a.src="//connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v2.10",n.parentNode.insertBefore(a,n))}(document,"script","facebook-jssdk"),$(document).ready(function(){var t=window.location.href,e=!t.split("/")[3],i=window.location.hostname,a=[];$(".wb-header-menu-item>a").each(function(){var n=$(this).prop("href"),s=!n.split("/")[3],o=n.split("/")[2],r={};i==o&&(e&&s||t.search(n)>-1&&!s)&&(r.element=$(this),r.menuPosition=1,r.hasChild=!1,$(this).closest("li").children("ul").length&&(r.hasChild=!0),$(this).closest("ul").parent("li").length&&(r.menuPosition=r.menuPosition+1),a.push(r))});for(var n={shortess:"",longess_url:""},s=a.length-1;s>=0;s--)1==a[s].menuPosition&&a[s].hasChild&&(n.shortess=a[s].element.prop("href"));for(var s=a.length-1;s>=0;s--)n.longess_url.length<a[s].element.prop("href").length?n.longess_url=a[s].element.prop("href"):1==a[s].menuPosition&&a[s].element.prop("href").length<=n.shortess.length&&a[s].hasChild?n.shortess=a[s].element.prop("href"):delete a[s];for(var s=a.length-1;s>=0;s--)a[s].element.parents(".wb-header-menu-item").addClass("active current-menu-item"),a[s].element.addClass("active")}),$("#contact_form").submit(function(t){var e=!0;if($(this).find(".edit_message").remove(),$(this).find(":input[type=text]").each(function(){var t=$(this),i=t.data("type"),a=t.data("message");switch(i){case"email":validateEmail(t.val())||($("<span class='edit_message'/>").text(a).insertAfter(t),e=!1);break;case"phone":validatePhone(t.val())||($("<span class='edit_message'/>").text(a).insertAfter(t),e=!1);break;default:t.val()||($("<span class='edit_message'/>").text(a).insertAfter(t),e=!1)}}),0==e)return!1}),$(".sort_products > option").each(function(){if(-1!=window.location.href.indexOf(this.value))return selected=this.value,$(this).attr("selected","selected"),!1}),$(".sort_products").change(function(t){var e=window.location.href;if(-1!=e.indexOf("keyword")){var i=window.location.search;-1!=i.indexOf("&")&&(i=i.substr(0,i.indexOf("&")));var e=window.location.origin+window.location.pathname+i}else var e=window.location.origin+window.location.pathname;-1!=e.indexOf("#")&&(e=e.replace("#","")),e=-1!=e.indexOf("?")?e+"&"+$(this).val():e+"?"+$(this).val(),window.location.href=e}),localStorage.getItem("product_view_type")||localStorage.setItem("product_view_type","grid"),changeProductView(),$("a.product_view_type").click(function(t){localStorage.setItem("product_view_type",$(this).attr("data-view")),changeProductView()}),$(document).ready(function(){$("#product-detail-gallery .image-zoom").elevateZoom({gallery:"product-detail-gallery",cursor:"pointer",galleryActiveClass:"active",easing:!0,responsive:!0,zoomWindowFadeIn:500,zoomWindowFadeOut:500,lensFadeIn:500,lensFadeOut:500}),$("#product-detail-gallery .image-zoom").bind("click",function(t){var e=$(".image-zoom").data("elevateZoom");return $.fancybox(e.getGalleryList()),!1})}),$(".slider-range")&&($(".slider-range").slider({range:!0,min:0,max:$("input[name='filter_max_price']").val(),values:[$("input[name='price_from']").val(),$("input[name='price_to']").val()],slide:function(t,e){$(".amount").val("$"+$("input[name='price_from']").val()+" - $"+$("input[name='price_to']").val())},change:function(t,e){$("input[name='price_from']").val($("#slider-range").slider("values",0)),$("input[name='price_to']").val($("#slider-range").slider("values",1)),$("#amount").val("$"+$("input[name='price_from']").val()+" - $"+$("input[name='price_to']").val())}}),$("#amount").val("$"+$("input[name='price_from']").val()+" - $"+$("input[name='price_to']").val())),function(t){t.Shop=function(e){this.$element=t(e),this.init()},t.Shop.prototype={init:function(){"checkout_thankyou"==t('input[name="page"]').val()&&localStorage.clear(),this.cartPrefix="wb-",this.cartName=this.cartPrefix+"cart",this.total=this.cartPrefix+"total",this.storage=localStorage,this.$formCart=this.$element.find("#shopping-cart-note"),this.$rules=this.$formCart.data("rules"),this.$note_rules=this.$element.find("#note_rules"),this.$btn_checkout=this.$element.find("#btn_checkout"),this.$formCartMini=this.$element.find("#shopping-cart-mini"),this.$checkoutCart=this.$element.find("#checkout-cart"),this.$checkoutOrderForm=this.$element.find("#checkout-order-form"),this.$shoppingCartActions=this.$element.find("#shopping-cart-actions"),this.$productQty=this.$element.find(".product-qty"),this.$btnAddToCart=this.$element.find(".addcart-link"),this.$btnFastOrder=t("#btnFastOrder"),this.createCart(),this.handleAddToCartForm(),this.handleCheckoutOrderForm(),this.handleUpdateQty(),this.displayCart(),this.displayCartCheckout(),this.displayCartValue(),this.displayFastCartValue(),this.deleteProduct(),this.handleChangeDevice()},createCart:function(){if(null==this.storage.getItem(this.cartName)){var t={};t.items=[],this.storage.setItem(this.cartName,this._toJSONString(t)),this.storage.setItem(this.total,"0")}},handleAddToCartForm:function(){self=this,this.$btnAddToCart.click(function(e){var i=self._convertString(t(this).data("price")),a=t(this).data("name"),n=t(this).data("img"),s=t(this).data("id"),o=1,r=t(this).attr("href");!0===t(this).data("direct")&&(window.location.href=r),t(this).hasClass("wb-main-order")&&(o=self.$productQty.val()>=1?parseInt(self.$productQty.val()):1);var c=s,l={},d=t(this).parents(".wb-shop").find(":input.edit_products_attribute:checked");return!!s&&(t.each(d,function(e,i){c+="_"+t(i).data("id"),l[e]={parent_name:t(i).data("parent-name"),id:t(i).data("id"),name:t(i).data("name")}}),self._addToCart({product:a,price:i,qty:o,image:n,id:s,product_attributes:l,remove_id:c}),window.location.href="/cart",!1)}),t(".extend-addcart").click(function(e){t(".is_product_detail_page .wb-shop").find(".addcart-link").click()}),self._setTotalItems()},deleteProduct:function(){var e=this;e.$formCart.length&&t(".shopping-cart").on("click",".pdelete a",function(i){i.preventDefault();for(var a=e._toJSONObject(e.storage.getItem(e.cartName)),n=a.items,s=0;s<n.length;++s)if(n[s].remove_id==t(this).data("remove-id")){n.splice(s,1);break}var o={};o.items=n,t("#coupon_list").empty(),e.storage.setItem(e.cartName,e._toJSONString(o)),e._setTotalItems(),e.displayCart(),e.displayCartCheckout(),e.displayFastCartValue()}),formatCurrency("#stotal")},displayCart:function(){var e=this;if(this.$formCart.length){var i=this._toJSONObject(this.storage.getItem(this.cartName)),a=i.items,n=t("table.shopping-cart"),s=n.find("tbody");e._setTotalItems(),s.html("");for(var o=0;o<a.length;++o){var r=a[o],c=r.remove_id,l="<p>",d=Object.keys(r.product_attributes).length;t.each(r.product_attributes,function(t,e){l+=e.parent_name+": "+e.name,t<d-1&&(l+=", ")}),l+="</p>";var p=r.price*r.qty,m=void 0;m=t(window).width()<=767?'\n                        <tr>\n                            <td class="pid" style="display:none;">\n                                '+r.id+'\n                            </td>\n                            <td class="pimg product-thumbnail">\n                                <img class="img" src="'+r.image+'">\n                            </td>\n                            <td class="product-info">\n                                <p class="pname product-name">'+r.product+"</p>\n                                "+l+'\n                                <p class="pprice">'+e._formatPrice(r.price)+'</p>\n                                <div class="pqty quantity">\n                                    <input style="width:50%;" type="number" min="1" value="'+r.qty+'" class="qty detail-qty info-qty border radius6 text-center"/> <div class="quantity-nav"><div class="quantity-button quantity-up">+</div><div class="quantity-button quantity-down">-</div></div>\n                                </div>\n                                <span class="pdelete product-remove pull-right">\n                                    <a class="remove" href="#" data-product="'+r.product+'" data-remove-id="'+c+"\">\n                                        <i class='fa fa-times'></i>\n                                    </a>\n                                </span>\n                            </td>\n                        </tr>":'\n                        <tr>\n                            <td class="pdelete product-remove" style="padding: 15px 10px !important;">\n                                <a class="remove" href="#" data-product="'+r.product+'" data-remove-id="'+c+'">\n                                    <i class=\'fa fa-times\'></i>\n                                </a>\n                            </td>\n                            <td class="pid" style="display:none;">\n                                '+r.id+'\n                            </td>\n                            <td class="pimg product-thumbnail">\n                                <img class="img" src="'+r.image+'">\n                            </td>\n                            <td class="pname product-name">\n                                <p>'+r.product+"</p>\n                                "+l+'\n                            </td>\n                            <td class="pprice">'+e._formatPrice(r.price)+'</td>\n                            <td class="pqty" style="padding: 15px 10px !important;"">\n                                <input style="width:75px;" type="number" min="1" value="'+r.qty+'" class="qty detail-qty info-qty border radius6 text-center"/>\n                            </td>\n                            <td class="psub_total">'+e._formatPrice(p)+"</td>\n                        </tr>",s.html(s.html()+m)}t(window).width()<=767?t("#shopping-cart #sub-total td.actions").attr("colspan",1):t("#shopping-cart #sub-total td.actions").attr("colspan",5),e._setTotalPrice()}formatCurrency(".pprice"),formatCurrency(".psub_total")},handleChangeDevice:function(){var e=this;t(window).resize(function(){e.displayCart()})},displayCartCheckout:function(){var e=this;if(this.$formCartMini.length){var i=this._toJSONObject(this.storage.getItem(this.cartName)),a=i.items,n=this.$formCartMini.find(".shopping-cart-mini"),s=n.find("tbody");s.html("");for(var o=0;o<a.length;++o){var r=a[o],c="<p class='wb-text13'>",l=Object.keys(r.product_attributes).length;t.each(r.product_attributes,function(t,e){c+=e.parent_name+": "+e.name,t<l-1&&(c+=", ")}),c+="</p>";var d="<tr class='cart_item'></td><td class='pname product-name text-left'><p class='pimg-name wb-text13'><img class='pimg product-image wb-mr-20' src='"+r.image+"' alt='"+r.product+"'>"+r.product+" <span class='pqty qty info-qty text-center wb-text13'>"+r.qty+"</span></p>"+c+"</td>";d+="<td class='pprice product-pprice wb-textright'><p class='pprice wb-text13'>"+e._formatPrice(r.price)+"</p></td></tr>",s.html(s.html()+d)}e._setTotalPrice()}formatCurrency(".pprice"),formatCurrency(".temporary_price")},displayCartValue:function(){if(this.$formCart.length){var e=this._toJSONObject(this.storage.getItem(this.cartName)),i=e.items;i=JSON.stringify(i),t("#checkout-order-form").append("<input type='hidden' value='"+i+"' name='products' id='list_products'>")}else if(this.$checkoutCart.length){var a=this._toJSONObject(this.storage.getItem(this.cartName)),n=a.items;n=JSON.stringify(n),this.$checkoutCart.find("tbody"),t("#checkout-order-form").append("<input type='hidden' value='"+n+"' name='products' id='list_products'>")}},displayFastCartValue:function(){if(t("#wbFastOrderBox").length){var e="[]",i=this._toJSONObject(this.storage.getItem(this.cartName));i.items&&(e=JSON.stringify(i.items)),t("#wbFastOrderBox").find("#fastOrderProducts").val("").val(e)}},handleCheckoutOrderForm:function(){this.$checkoutOrderForm.length&&t("#same-as-billing").on("change",function(){t(this).prop("checked")?t("#fieldset-shipping").slideDown("normal"):t("#fieldset-shipping").slideUp("normal")})},handleUpdateQty:function(){var e=this;t(".shopping-cart").on("change",".qty",function(i){t("#coupon_list").empty();var a=e.storage.getItem(e.cartName),n=e._toJSONObject(a),s=!1,o=t(this).val();(!isNaN(o)||o<=0)&&(o=e._convertString(o),o=parseInt(o),o=Math.abs(o),o<=0&&(o+=1),t(this).val(o));var r=(parseInt(t(this).closest("tr").find(".pid").html()),t(this).closest("tr").find(".pname").html(),e._convertString(e._extractPrice(t(this).closest("tr").find(".pprice"))),t(this).closest("tr").find(".pimg > .img").attr("src"),t(this).closest("tr").find(".psub_total").html(),t(this).closest("tr").find(".pdelete .remove").data("attributes"),t(this).closest("tr").find(".pdelete .remove").data("remove-id"));if(e.$formCart.length){if(p=n.items,p.length>0)for(var c=0;c<p.length;++c){var l=p[c];if(l.remove_id==r){s=!0;break}}if(p.length>0&&1==s){var d=n,p=d.items;jQuery.each(p,function(t,e){e.remove_id==r&&(e.qty=o,e.sub_total=e.qty*e.price),e.product,e.price,e.qty,e.image,e.image_alt,e.id,e.sub_total}),e.storage.setItem(e.cartName,e._toJSONString(d)),e.displayCart(),e.displayCartCheckout(),e.displayFastCartValue()}}}),e._clickBtnQty(".quantity-up"),e._clickBtnQty(".quantity-down")},_clickBtnQty:function(e){t(".shopping-cart").on("click",".product-info .pqty.quantity .quantity-nav "+e,function(i){var a=parseInt(t(this).parents("div.pqty.quantity").children("input.qty").val());".quantity-up"==e&&t(this).parents("div.pqty.quantity").children("input.qty").val(a+1),".quantity-down"==e&&a>1&&t(this).parents("div.pqty.quantity").children("input.qty").val(a-1),t(this).parents("div.pqty.quantity").children("input.qty").trigger("change")})},_setTotalItems:function(){var e=this;if(t("#mini-cart-link").length||t(".mini-cart-link").length){var i=e._toJSONObject(e.storage.getItem(e.cartName));t(".total_items").html(i.items.length)}},_setTotalPrice:function(){var e=this,i=0;if(e.$formCart.length)for(var a=this._toJSONObject(this.storage.getItem(this.cartName)),n=a.items,s=0;s<n.length;++s){var o=n[s];i+=o.qty*o.price}this.$rules&&(this.$rules.minimum&&i-this.$rules.minimum<0?(this.$btn_checkout.addClass("disabled-link"),this.$btnFastOrder.addClass("disabled-link")):(this.$btn_checkout.removeClass("disabled-link"),this.$btnFastOrder.removeClass("disabled-link")),this.$rules.note?this.$note_rules.html(this.$rules.note):this.$note_rules.remove()),t("#stotal").html(e._formatPrice(i)),t("#stotal-mini")&&(t(".temporary_price").html(e._formatPrice(i)),""==t("#shipping_fee_val").text().trim()||t("#noti_coupon").hasClass("already_free_ship")||(i+=parseInt(t("#shipping_fee_val").text().replace(/\D/g,""))),t("#stotal-mini").html(e._formatPrice(i)),this.$rules&&this.$rules.minimum&&(i-this.$rules.minimum<0?(t("#submit-order").attr("disabled",!0),t("#btnFastOrder").attr("disabled",!0)):(t("#submit-order").attr("disabled",!1),t("#btnFastOrder").attr("disabled",!1)))),formatCurrency("#stotal"),formatCurrency("#stotal-mini")},_formatNumber:function(t,e){return t.toFixed(e)},_extractPrice:function(t){var e=this;return t.text().replace(e.currencyString,"").replace(" ","")},_convertString:function(t){var e;return e=/^[-+]?[0-9]+\.[0-9]+$/.test(t)?parseFloat(t):/^\d+$/.test(t)?parseInt(t,10):Number(t),isNaN(e)?(console.warn(t+" cannot be converted into a number"),!1):e},_convertNumber:function(t){return t.toString()},_toJSONObject:function(t){return JSON.parse(t)},_toJSONString:function(t){return JSON.stringify(t)},_addToCart:function(t){var e=this.storage.getItem(this.cartName),i=this._toJSONObject(e),a=!1,n=this;if(this.$formCart.length){if(r=i.items,r.length>0)for(var s=0;s<r.length;++s)if(r[s],r[s].remove_id==t.remove_id){a=!0;break}if(r.length>0&&1==a){var o=(this.storage.getItem(this.total),i),r=o.items;jQuery.each(r,function(e,i){i.remove_id==t.remove_id&&(i.qty=i.qty+t.qty),i.product,i.price,i.qty,i.image,i.image_alt,i.id,n.storage.setItem(n.cartName,n._toJSONString(o))})}else{var o=i,r=o.items;r.push(t),this.storage.setItem(this.cartName,this._toJSONString(o))}}return!1},_formatPrice:function(t){return t}},new t.Shop(".wb-shop")}(jQuery),$(document).on("click",".btn-view-cart",function(){window.location.href="/cart"}),$(document).ready(function(){if("checkout"==$('input[name="page"]').val()){var t=function(t,e,i){var a={province_id:e};$.ajax({type:"GET",url:t,data:a,success:function(t){var e=i.find("option").first();i.html(e),$.each(t,function(t,e){var a=document.createElement("option");a.text=e.name,a.value=e.name,$(a).attr("data-id",e.id),i.append(a)})}})},e=function(t){$(".edit_shipping").css("display","none"),$("ul.ship_methods").empty(),$(".shipping_fee_val").empty(),$(".shipping_message").html(t.message),$(".shipping_message_val").css("display","table-row"),$(".shipping_fee").css("display","table-row"),stotal=parseInt($(".temporary_price").html().replace(/\D/g,"")),$("#stotal-mini").html(stotal)},i=function(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;$.ajax({url:"/api/v1/shipping-fee",type:"POST",data:{method:"default",order:{receiver:{provinceId:i,districtId:t},weight:a,amount:n}}}).done(function(t){if(t.error||0==t.success)return e(t),formatCurrency("#stotal-mini"),!1;$(".edit_shipping").css("display","block"),$("ul.ship_methods").empty();var i="";if($.each(t.data,function(t,e){0==t&&(i="checked");var a="<li class='ship_method_bacs'><input type='radio' name='ship' id='ship"+e.id+"' value='"+e.id+"' "+i+" data-val='"+e.fee+"'><label for='ship"+e.id+"' class='wb-text15'>"+e.name+"<span class='pull-right shipping_fee_val'>"+e.fee+"</span></label></li>";$("ul.ship_methods").append(a),i=""}),$(".shipping_message").empty(),$("#noti_coupon").hasClass("already_free_ship"))$("#shipping_fee_val").empty().html($("#noti_coupon").data("free_shipping"));else{s.shipping_fee=parseInt(t.data[0].fee);var a=parseInt(s.price)+parseInt(s.shipping_fee);$("#shipping_fee_val").empty().html(s.shipping_fee),$("#stotal-mini").empty().html(a),formatCurrency("#shipping_fee_val"),formatCurrency("#stotal-mini")}$(".shipping_fee").css("display","table-row"),$(".shipping_message_val").css("display","none"),formatCurrency(".shipping_fee_val"),$("#submit-order").is(":disabled")&&$("#submit-order").prop("disabled",!1)}).fail(function(t){0==t.code&&e(t)})};$("#btn_checkout").text($('input[name="btn-update-cart-val"]').val()),$("#btn_checkout").click(function(t){return t.preventDefault(),$("#wb-modal-cart").modal("toggle"),!1}),function(t){var e={};$.ajax({type:"GET",url:t,data:e,success:function(t){$.each(t,function(t,e){var i=document.createElement("option");i.text=e.name,i.value=e.name,$(i).attr("data-id",e.id),$("#province").append(i);var a=document.createElement("option");a.text=e.name,a.value=e.name,$(a).attr("data-id",e.id),$("#sprovince").append(a)})}})}($("#province").data("action")),$("#province").change(function(){$("#district").find("option:not(:first)").remove(),$("#shipping_fee_val").empty();var e=$(this).find(":selected");t($("#district").data("action"),e.attr("data-id"),$("#district"))}),$("#sprovince").change(function(){$("#sdistrict").find("option:not(:first)").remove(),$("#shipping_fee_val").empty();var e=$(this).find(":selected");t($("#district").data("action"),e.attr("data-id"),$("#sdistrict"))}),$("input[type=radio][name=payment]").change(function(){$(".payment_description").hide(),$("#payment_"+$(this).val()).show()});var a=JSON.parse($('input[name="products"]').val()),n=[];$.each(a,function(t,e){n.push(e.id)});var s={product_ids:n,price:parseInt($(".temporary_price").html().replace(/\D/g,"")),shipping_fee:0,is_freeship:0,applied_code:0};$("#district").change(function(){if(!$("input[name=has_saddress]").is(":checked")){var t=$(this).find("option:selected").data("id"),e=$("#province").find("option:selected").data("id");i(t,e,1,parseInt($("#stotal-mini").html().replace(/\D/g,"")))}}),$("#sdistrict").change(function(){if($("input[name=has_saddress]").is(":checked")){var t=$(this).find("option:selected").data("id"),e=$("#sprovince").find("option:selected").data("id");i(t,e,1,parseInt($("#stotal-mini").html().replace(/\D/g,"")))}}),$(document).on("keyup blur","input#coupon_code",function(t){""!=$(this).val()?$("input#check-coupon").hasClass("disabled")&&($("input#check-coupon").prop("disabled",!1),$("input#check-coupon").removeClass("disabled")):$("input#check-coupon").hasClass("disabled")||($("input#check-coupon").addClass("disabled"),$("input#check-coupon").prop("disabled",!0))}),$(".ship_methods").change("input:radio[name=ship]",function(){s.price=parseInt($(".temporary_price").html().replace(/\D/g,"")),$("#noti_coupon").hasClass("already_free_ship")||(s.shipping_fee=$("input:radio[name=ship]:checked").data("val"),total=parseInt(s.price)+parseInt(s.shipping_fee),$("#shipping_fee_val").empty().html(s.shipping_fee),formatCurrency("#shipping_fee_val"),$("#stotal-mini").empty().html(total)),formatCurrency(".shipping_fee_val"),formatCurrency("#stotal-mini")});var o=[];$("#coupon_list").on("click","button.close",function(){var t=$(this).data("coupon");$.each(o,function(e,i){t==i.code&&("free_shipping"==i.type&&$("#noti_coupon").hasClass("already_free_ship")&&($("#noti_coupon").removeClass("already_free_ship"),""!=$(".ship_methods").html()&&(s.shipping_fee=$("input:radio[name=ship]:checked").data("val"),$("#shipping_fee_val").html(s.shipping_fee))),s.price=parseFloat(s.price)+parseFloat(i.discount),$("#stotal-mini").html(parseFloat(s.price)+parseFloat(s.shipping_fee)),o.splice(e,1))}),formatCurrency("#shipping_fee_val"),formatCurrency("#stotal-mini")}),$("#check-coupon").click(function(t){var e=$("#coupon_code").val().replace(/ /g,"");if(s.price=parseInt($(".temporary_price").html().replace(/\D/g,"")),""!=e){var i=[];$('input[name="coupon_code[]"]').each(function(){i.push($(this).val())}),$.inArray(e,i)<0?$.ajax({url:"/apply-coupon",type:"GET",data:{code:e,order:s}}).done(function(t){if($("#coupon_code").css({"margin-bottom":"10px"}),t.success){$(".wb_cart .woocommerce table.shop_table td .coupon").css("padding-bottom","20px"),$(".noti_coupon").css({display:"none"}),$("tr.discount_price").show(),$(".coupon_message").css({display:"table-row"}),"free_shipping"==t.coupon.type?($("#noti_coupon").hasClass("already_free_ship")||$("#noti_coupon").addClass("already_free_ship"),discount=$("#noti_coupon").data("free_shipping"),$("#shipping_fee_val").html($("#noti_coupon").data("free_shipping"))):"percent_bill"==t.coupon.type?discount=t.coupon.value+"%":discount=t.coupon.value;var i={};i.discount=parseFloat(s.price)-parseFloat(t.order.price),i.code=e,i.type=t.coupon.type,o.push(i),s=t.order,$("#stotal-mini").html(parseFloat(s.price)+parseFloat(s.shipping_fee));var a='<div class="alert alert-success alert-component"><p class="text-left"><i class="fa fa-check" aria-hidden="true"></i>'+e+'<button style="float:none;" type="button" data-coupon="'+e+'" class="close wb-ml-10" data-dismiss="alert"><span>×</span><span class="sr-only">Close</span></button><span style="float: right;" class="wb-textright discount_price" id="discount_price">'+discount+'</span></p><input class="hide coupon_code_apply" name="coupon_code[]" value="'+e+'"></div>';$("#coupon_list").append(a),"money_bill"==t.coupon.type&&formatCurrency("#discount_price"),formatCurrency("#stotal-mini"),$("#coupon_code").val("")}else $("#noti_coupon").html('<span style="color: red;">'+$("#noti_coupon").data(t.message)+"</span>"),$(".noti_coupon").css("display","table-row")}):($(".wb_cart .woocommerce table.shop_table td .coupon").css("padding-bottom","5px"),$("#noti_coupon").html('<span style="color: red;">'+$("#noti_coupon").data("coupon_used")+"</span>"))}})}else"checkout_thankyou"==$('input[name="page"]').val()&&function(){$.ajax({url:$("#data_js").data("route_order_email_new"),type:"POST",data:{_token:$("meta[name=csrf-token]").attr("content")}})}()}),$(document).ready(function(){$(".wb-slick-slider-for").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:".wb-slick-slider-nav"}),$(".wb-slick-slider-nav").slick({slidesToShow:5,slidesToScroll:1,asNavFor:".wb-slick-slider-for",focusOnSelect:!0})});var fixOwl=function(){var t=$(".owl-stage"),e=t.width(),i=$(".owl-item"),a=0;i.each(function(){a+=$(this).width()+ +$(this).css("margin-right").slice(0,-2)}),a>e&&t.width(a)};if($(document).ready(function(){initOwl()}),$('.widget_product_body ul li a[data-toggle="tab"]').on("shown.bs.tab",function(t){initOwl()}),$(function(){setTimeout(function(){$("#subscribe-me").firstVisitPopup({cookieName:"wb",showAgainSelector:"#show-message"})},1e3*parseInt($("#subscribe-me").data("delay-time")))}),function(t){"use strict";t.fn.firstVisitPopup=function(e){var i,a=t("body"),n=t(this),s=function(t,e){var i=new Date,a="expires=";i.setTime(i.getTime()+864e5),a+=i.toGMTString(),document.cookie=t+"="+e+"; "+a+"; path=/"},o=function(){i.show(),n.show(),t("#subscribe-me").modal("show")},r=function(){i.hide(),n.hide(),t("#subscribe-me").modal("hide"),t("#success_msg").modal("hide"),s("fvpp"+e.cookieName,"true")};t(".newsletter-popup").append('<a id="xout">X</a>'),i=t("#fvpp-blackout"),function(t){var e=document.cookie.split(";"),i=0,a="";for(i=0;i<e.length;i++){for(a=e[i];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t+"="))return a.substring(t.length+1,a.length)}return!1}("fvpp"+e.cookieName)?r():o(),t("#checkme:checkbox").change(function(){this.checked&&a.on("click","#email-popup-submit",r)}),t(e.showAgainSelector).on("click",o),a.on("click","#fvpp-blackout, #xout",r)}}(jQuery),$(document).ready(function(){$("#stickLayer").length>0?function(t){var e=document.cookie.split(";"),i=0,a="";for(i=0;i<e.length;i++){for(a=e[i];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t+"="))return a.substring(t.length+1,a.length)}return!1}("wb_sticktome")||($.stickToMe({layer:"#stickLayer"}),function(t,e){var i=new Date,a="expires=";i.setTime(i.getTime()+864e5),a+=i.toGMTString(),document.cookie="wb_sticktome=true; "+a+"; path=/"}()):document.cookie="wb_sticktome = false; 0"}),$(".wb-partner").slick({lazyLoad:"ondemand",slidesToShow:6,slidesToScroll:1,arrows:!0,infinite:!0,autoplay:!0,responsive:[{breakpoint:1200,settings:{slidesToShow:5,slidesToScroll:1}},{breakpoint:992,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:1}}]}),$("#system_comments").length){$(document).on("click",".comment_reply",function(){return $(this).parents(".comment-box:first").children(".comment-footer:first").show(),!1}),$(document).on("click",".comment_reply_close",function(){$(this).parents(".comment-footer:first").hide()}),$(document).on("click",".more_comment",function(){return!1});var CommentRender=new Vue({el:"#system_comments",data:{name:"",email:"",commentable_type:"",commentable_id:"",censorship:"",limit:5,comments:[],errors:"",end:!1},created:function(){this.commentable_type=$("#system_comments").data("commentable_type"),this.commentable_id=$("#system_comments").data("commentable_id"),this.censorship=$("#system_comments").data("censorship")},mounted:function(){this.load()},methods:{more:function(){this.end||(this.limit+=5,this.load())},submit:function(t){t.preventDefault(),this.name=""!==this.name?this.name:t.target.elements.name.value,this.email=""!==this.email?this.email:t.target.elements.email.value;var e={};if(e.name=this.name,e.email=this.email,e.content=t.target.elements.content.value,t.target.elements.content.value="",e.parent_id=t.target.elements.parent_id.value,e.commentable_type=this.commentable_type,e.commentable_id=this.commentable_id,e.censorship=this.censorship,""!=e.name&&""!=e.email&&""!=e.content){this.errors="";var i=this;$.post("/submit-comment",e,function(t,e,a){i.load()})}else this.errors="Bạn vui lòng nhập đầy đủ thông tin!"},load:function(){var t=this,e={commentable_type:this.commentable_type,commentable_id:this.commentable_id,limit:this.limit};$.get("/load-comment",e,function(e,i,a){t.comments=e,t.limit>t.comments.length?t.end=!0:t.end=!1})}}})}$(".subcribe_mail").click(function(t){t.preventDefault();var e=$(this).closest(".wb-email-form"),i={name:e.find("input[name=subcribe_name]").val()||"",email:e.find("input[name=subcribe_mail]").val()||"",phone:e.find("input[name=subcribe_phone]").val()||""};return $.ajax({url:"/api/subscribe",type:"POST",data:i}).done(function(t){t.success,alert(t.message),$("input[name=subcribe_name]").val(""),$("input[name=subcribe_mail]").val(""),$("input[name=subcribe_phone]").val("")}).fail(function(t){alert(t.responseJSON.email)}),!1}),$(document).ready(function(){$(".search-box").autocomplete({source:function(t,e){$.ajax({url:"/search/product/autocomplete",data:{keyword:t.term},success:function(t){
e($.map(t.data,function(t,e){return{value:t.title,avatar:t.thumbnail,url:t.url}}))}})}}).data("uiAutocomplete")._renderItem=function(t,e){return $("<li></li>").data("item.autocomplete",e).append("<p class='content_autocomplete_search'><a href='"+e.url+"'><img class='avt_autocomplete_search' src='"+e.avatar+"' /><span class='txt_autocomplete_search'>"+e.value+"</span></a></p>").appendTo(t)}}),$(document).ready(function(){$(".wb-client-slider .slick").length>0&&$(".wb-client-slider .slick").each(function(){$(this).slick({fade:!0,infinite:!0,initialSlide:1,slidesToShow:1,prevArrow:'<div class="slick-prev slick-nav"></div>',nextArrow:'<div class="slick-next slick-nav"></div>'}),slick_control(),$(".slick").on("afterChange",function(t){slick_control()})})});